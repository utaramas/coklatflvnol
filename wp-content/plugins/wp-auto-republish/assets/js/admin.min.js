jQuery(document).ready(function(e){function t(){e("a.wpar-error-viewer").click(function(t){t.preventDefault(),""!=e(this).data("reason")&&e.alert({title:wpar_admin_L10n.error,content:e(this).data("reason"),useBootstrap:!1,draggable:!1,theme:"material",type:"red",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wpar_admin_L10n.close_btn,action:function(){}}}})})}function a(){e("span.wpar-remove-log-item").click(function(t){t.preventDefault();var a=e(this),r=a.data("entry-id"),o=confirm(wpar_admin_L10n.are_you_sure);e("#"+a.data("selector")+" .nonce-error").hide(),1==o&&e.post(wpar_admin_L10n.ajaxurl,{action:"wpar_process_remove_log_item",security:wpar_admin_L10n.security,log_entry_id:r},function(t,o){!0===t.success?(e("tr.wpar-entry-"+r).remove(),e("#wpar-log-data table tbody").find("tr.wpar-log-entries").length||(e("#wpar-log-data").html('<div style="padding: 10px 14px;background-color: #eee;border: 1px solid #cccccc;">'+wpar_admin_L10n.no_logs_found+"</div>"),"default"==e("#wpar-log-state").val()&&e("#wpar-log-data-control").remove())):e("#"+a.data("selector")+" .nonce-error").text(t.data.error).show().delay(3e3).fadeOut("slow")})})}for(var r=e("#nav-container").find("a.nav-tab:not(#upgrade)"),o=0;o<r.length;o++)e(r[o]).click(function(t){t.preventDefault(),e("a.nav-tab-active").removeClass("nav-tab-active"),e(this).addClass("nav-tab-active"),e(".wpar-metabox .wpar-"+e(this).attr("id")).show(),e(".wpar-metabox .postbox:not(.wpar-"+e(this).attr("id")+")").hide(),e.cookie("wpar_active_tab",e(this).attr("id"),{expires:30})});if(void 0!==e.cookie("wpar_active_tab")&&e("#nav-container").find("a#"+e.cookie("wpar_active_tab")).trigger("click"),"undefined"==typeof wpar_admin_L10n)return!1;e("input.wpar-filter").click(function(r){r.preventDefault();var o=e(this),n=o.val();o.addClass("disabled").val(wpar_admin_L10n.please_wait),e("#"+o.data("selector")+" .spinner").addClass("is-active"),e("#"+o.data("selector")+" .nonce-error").hide(),e.post(wpar_admin_L10n.ajaxurl,{action:"wpar_process_filter_log",security:wpar_admin_L10n.security,filter:e("#wpar-log-filter").val(),count:e("#wpar-log-entries").val()},function(r,s){e("#"+o.data("selector")+" .spinner").removeClass("is-active"),!0===r.success?(e("#wpar-log-data").html(r.data.output),e("input.wpar-filter").removeClass("disabled").val(n),t(),a()):(o.val(n).removeClass("disabled"),e("#"+o.data("selector")+" .nonce-error").text(r.data.error).show().delay(3e3).fadeOut("slow"))})}),t(),a(),e("#wpar-settings-form").submit(function(){e(".wpar-save").addClass("disabled").val(wpar_admin_L10n.saving);var t=e.dialog({title:wpar_admin_L10n.saving,content:wpar_admin_L10n.saving_text,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1});return e(this).ajaxSubmit({success:function(){t.close(),e.alert({title:wpar_admin_L10n.done,content:wpar_admin_L10n.save_success,useBootstrap:!1,draggable:!1,theme:"material",type:"green",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wpar_admin_L10n.ok_button,action:function(){}}}}),e(".wpar-save").removeClass("disabled").val(wpar_admin_L10n.save_button)},error:function(){t.close(),e.alert({title:wpar_admin_L10n.error,content:wpar_admin_L10n.process_failed,useBootstrap:!1,draggable:!1,theme:"material",type:"red",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wpar_admin_L10n.ok_button,action:function(){}}}})}}),!1}),e("input.wpar-copy").on("click",function(t){t.preventDefault();var a=e(this),r=a.val();a.addClass("disabled").val(wpar_admin_L10n.please_wait),e.post(wpar_admin_L10n.ajaxurl,{action:"wpar_process_copy_data",security:wpar_admin_L10n.security},function(t,o){if(!0===t.success){var n=e("<input>");e("body").append(n),n.val(t.data.settings_data).select(),document.execCommand("copy"),n.remove(),a.removeClass("disabled").val(r),e(".wpar-copied").show().delay(1e3).fadeOut()}})}),e("input.wpar-paste").on("click",function(t){t.preventDefault();e(this);var a=e.confirm({title:wpar_admin_L10n.paste_data,content:'<textarea id="wpar-settings-data-import" rows="4" style="width: 100%;"></textarea>',useBootstrap:!1,theme:"material",animation:"scale",type:"green",boxWidth:"40%",draggable:!1,scrollToPreviousElement:!1,buttons:{confirm:{text:wpar_admin_L10n.import_btn,action:function(){var t=this.$content.find("#wpar-settings-data-import").val();if(!t)return alert("Please enter valid settings data!"),!1;console.log(t),a.close(),e.dialog({title:wpar_admin_L10n.importing,content:wpar_admin_L10n.processing,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1}),e.post(wpar_admin_L10n.ajaxurl,{action:"wpar_process_import_data",settings_data:t,security:wpar_admin_L10n.security},function(t,a){!0===t.success&&(window.location.reload(),e.cookie("wpar_active_tab","general",{expires:30}))})}},close:{text:wpar_admin_L10n.close_btn,action:function(){}}}})}),e("input.wpar-reset, input.wpar-social-account-remove").on("click",function(t){t.preventDefault();var a=e(this),r=a.data("action"),o=a.data("notice"),n=a.data("success"),s=a.data("account-type"),i=a.data("db-name"),c=a.data("reload"),l=e.confirm({title:wpar_admin_L10n.warning,content:o,useBootstrap:!1,theme:"material",animation:"scale",type:"red",boxWidth:"30%",draggable:!1,scrollToPreviousElement:!1,buttons:{confirm:{text:wpar_admin_L10n.confirm_button,action:function(){l.close();var t=e.dialog({title:wpar_admin_L10n.deleting,content:wpar_admin_L10n.processing,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1});e.post(wpar_admin_L10n.ajaxurl,{action:r,account_type:s,database_name:i,security:wpar_admin_L10n.security},function(a,r){!0===a.success?(t.close(),e.alert({title:wpar_admin_L10n.done,content:n,useBootstrap:!1,draggable:!1,theme:"material",type:"green",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wpar_admin_L10n.ok_button,action:function(){!0===a.data.replace_html&&("log-data"===s?(e("#wpar-log-data").html('<div style="padding: 10px 14px;background-color: #eee;border: 1px solid #cccccc;">'+wpar_admin_L10n.no_logs_found+"</div>"),e("#wpar-log-data-control").remove()):"log-data"!==s&&e("#wpar-"+s+"-accounts-list, input.wpar-"+s+"-btn-remove").remove()),!0===c&&window.location.reload()}}}})):(t.close(),e.alert({title:wpar_admin_L10n.error,content:a.data.error,useBootstrap:!1,draggable:!1,theme:"material",type:"red",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wpar_admin_L10n.ok_button,action:function(){}}}}))})}},cancel:{text:wpar_admin_L10n.cancel_button,action:function(){}}}})}),e("select#wpar_post_taxonomy").selectize({plugins:["remove_button"],delimiter:",",placeholder:wpar_admin_L10n.select_category,persist:!1,create:!1}),e("select#wpar_republish_days").selectize({plugins:["remove_button"],delimiter:",",placeholder:wpar_admin_L10n.select_weekdays,persist:!1,create:!1}),e("select#wpar_post_types_list, select#wpar_email_post_types, select#wpar_post_types_list_display, select#wpar_post_types_list_single").selectize({plugins:["remove_button"],delimiter:",",placeholder:wpar_admin_L10n.select_post_types,persist:!1,create:!1}),e("select#wpar_single_roles").selectize({plugins:["remove_button"],delimiter:",",placeholder:wpar_admin_L10n.select_user_roles,persist:!1,create:!1}),e("select#wpar_custom_taxonomy, select.wpar_social_taxonomy").selectize({plugins:["remove_button"],delimiter:",",placeholder:wpar_admin_L10n.select_taxonomies,persist:!1,create:!1}),e("#wpar_override_category_tag").selectize({plugins:["remove_button","restore_on_backspace","drag_drop"],delimiter:",",placeholder:wpar_admin_L10n.post_ids,persist:!1,create:function(e){return{value:e,text:e}}}),e("#wpar_email_recipients").selectize({plugins:["remove_button","restore_on_backspace"],persist:!1,create:!0,createOnBlur:!0,delimiter:",",createFilter:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}}),e(".wpar-datepicker").datepicker({dateFormat:"dd/mm/yy",maxDate:-1,changeMonth:!0,changeYear:!0,yearRange:"-15:+0",defaultDate:"-5y"}),e(".wpar-timepicker").timepicker({timeFormat:"HH:mm:ss",stepHour:1,stepMinute:1,stepSecond:1}),e("#wpar_republish_info").change(function(){"disable"==e("#wpar_republish_info").val()&&(e(".wpar_css_republish_info_text, .wpar_css_post_types_list_display").hide(),e("#wpar_css_republish_info_text").removeAttr("required")),"disable"!=e("#wpar_republish_info").val()&&(e(".wpar_css_republish_info_text, .wpar_css_post_types_list_display").show(),e("#wpar_css_republish_info_text").attr("required","required"))}).change(),e("#wpar_republish_post_age").change(function(){"custom"==e(this).val()&&(e(".wpar_css_republish_custom_age").show(),e("#wpar_republish_custom_age").attr("required","required")),"custom"!=e(this).val()&&(e(".wpar_css_republish_custom_age").hide(),e("#wpar_republish_custom_age").removeAttr("required"))}).change(),e("#wpar_minimun_republish_interval").change(function(){"custom"==e(this).val()&&(e(".wpar_css_republish_custom_interval").show(),e("#wpar_republish_custom_interval").attr("required","required")),"custom"!=e(this).val()&&(e(".wpar_css_republish_custom_interval").hide(),e("#wpar_republish_custom_interval").removeAttr("required"))}).change(),e("#wpar_exclude_by_type").change(function(){"none"==e(this).val()&&e(".wpar_css_post_taxonomy, .wpar_css_custom_taxonomy, .wpar_css_override_category_tag").hide(),"none"!=e(this).val()&&e(".wpar_css_post_taxonomy, .wpar_css_custom_taxonomy, .wpar_css_override_category_tag").show()}).change(),e("#wpar_republish_post_age_start_method").change(function(){"specific_date"==e(this).val()&&(e(".wpar_css_republish_post_age_start").show(),e(".wpar_css_republish_custom_age_start").hide(),e("#wpar_republish_post_age_start").attr("required","required"),e("#wpar_republish_custom_age_start").removeAttr("required")),"last_hours"==e(this).val()&&(e(".wpar_css_republish_custom_age_start").show(),e(".wpar_css_republish_post_age_start").hide(),e("#wpar_republish_custom_age_start").attr("required","required"),e("#wpar_republish_post_age_start").removeAttr("required"))}).change(),e("#wpar-log-filter").change(function(){"default"==e(this).val()&&e("#wpar-log-state").val("all"),"default"!=e(this).val()&&e("#wpar-log-state").val("custom")}).change(),e("#wpar_enable_plugin").change(function(){e(this).is(":checked")&&e("#wpar_global_cron_change").val("yes"),e(this).is(":checked")||e("#wpar_global_cron_change").val("no")}).change(),e("#wpar_disable_log").change(function(){e(this).is(":checked")&&e("#nav-container a#logs").hide(),e(this).is(":checked")||e("#nav-container a#logs").show()}).change(),e(".coffee-amt").change(function(){var t=e(".buy-coffee-btn");t.attr("href",t.data("link")+e(this).val())}),e(window).keydown(function(t){if(t.ctrlKey||t.metaKey)switch(String.fromCharCode(t.which).toLowerCase()){case"s":t.preventDefault(),e("#wpar-settings-form").submit()}})});